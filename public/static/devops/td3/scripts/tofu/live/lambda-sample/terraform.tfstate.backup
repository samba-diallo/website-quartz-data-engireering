{"version":4,"terraform_version":"1.10.7","serial":1,"lineage":"7f72c309-58f2-09f3-c5ec-5856438e843f","outputs":{"api_endpoint":{"value":"https://2aveis6cl1.execute-api.us-east-2.amazonaws.com","type":"string"}},"resources":[{"module":"module.function","mode":"data","type":"archive_file","name":"source_code","provider":"provider[\"registry.opentofu.org/hashicorp/archive\"]","instances":[{"schema_version":0,"attributes":{"exclude_symlink_directories":null,"excludes":null,"id":"50993f487d75ec843778aaf288dad4a59a5b36cd","output_base64sha256":"5u1+RBQ9wfZ77/3YkDHYFteamsXrxHOWaEdivzZuehQ=","output_base64sha512":"3xFj4fCGPVXd6GJW9UxqZ8L33T7RvH7NVpNi/m0qBt+6OxF92KQ+lTN39WI8D9X+IF02ZdbBcolekXNSYQL0Gw==","output_file_mode":null,"output_md5":"383971d82a0f035548bf5acb74469d92","output_path":"../../modules/lambda/lambda-sample.zip","output_sha":"50993f487d75ec843778aaf288dad4a59a5b36cd","output_sha256":"e6ed7e44143dc1f67beffdd89031d816d79a9ac5ebc47396684762bf366e7a14","output_sha512":"df1163e1f0863d55dde86256f54c6a67c2f7dd3ed1bc7ecd569362fe6d2a06dfba3b117dd8a43e953377f5623c0fd5fe205d3665d6c172895e9173526102f41b","output_size":238,"source":[],"source_content":null,"source_content_filename":null,"source_dir":"./src","source_file":null,"type":"zip"},"sensitive_attributes":[]}]},{"module":"module.function","mode":"data","type":"aws_iam_policy_document","name":"allow_logging","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"16712114","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Resource\":\"arn:aws:logs:*:*:*\"}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:logs:*:*:*"],"sid":""}],"version":"2012-10-17"},"sensitive_attributes":[]}]},{"module":"module.function","mode":"data","type":"aws_iam_policy_document","name":"policy","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"2690255455","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["lambda.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_attributes":[]}]},{"module":"module.function","mode":"managed","type":"aws_iam_role","name":"lambda","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::511211062907:role/lambda-sample","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-06T18:44:39Z","description":"","force_detach_policies":false,"id":"lambda-sample","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"lambda-sample","name_prefix":"","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAXOBUNYZ5Z32LOYXPG"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.function.data.aws_iam_policy_document.policy"]}]},{"module":"module.function","mode":"managed","type":"aws_iam_role_policy","name":"allow_logging","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"lambda-sample:lambda-sample-allow-logging","name":"lambda-sample-allow-logging","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}","role":"lambda-sample"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.function.aws_iam_role.lambda","module.function.data.aws_iam_policy_document.allow_logging","module.function.data.aws_iam_policy_document.policy"]}]},{"module":"module.function","mode":"managed","type":"aws_lambda_function","name":"function","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-2:511211062907:function:lambda-sample","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"NODE_ENV":"production"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"../../modules/lambda/lambda-sample.zip","function_name":"lambda-sample","handler":"index.handler","id":"lambda-sample","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-2:511211062907:function:lambda-sample/invocations","kms_key_arn":"","last_modified":"2025-12-06T18:44:49.162+0000","layers":null,"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/lambda-sample","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-2:511211062907:function:lambda-sample:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-2:511211062907:function:lambda-sample:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::511211062907:role/lambda-sample","runtime":"nodejs20.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"5u1+RBQ9wfZ77/3YkDHYFteamsXrxHOWaEdivzZuehQ=","source_code_size":238,"tags":null,"tags_all":{},"timeout":5,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19","dependencies":["module.function.aws_iam_role.lambda","module.function.data.archive_file.source_code","module.function.data.aws_iam_policy_document.policy"]}]},{"module":"module.gateway","mode":"managed","type":"aws_apigatewayv2_api","name":"api","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"api_endpoint":"https://2aveis6cl1.execute-api.us-east-2.amazonaws.com","api_key_selection_expression":"$request.header.x-api-key","arn":"arn:aws:apigateway:us-east-2::/apis/2aveis6cl1","body":null,"cors_configuration":[],"credentials_arn":null,"description":"","disable_execute_api_endpoint":false,"execution_arn":"arn:aws:execute-api:us-east-2:511211062907:2aveis6cl1","fail_on_warnings":null,"id":"2aveis6cl1","name":"lambda-sample","protocol_type":"HTTP","route_key":null,"route_selection_expression":"$request.method $request.path","tags":null,"tags_all":{},"target":null,"version":""},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.gateway","mode":"managed","type":"aws_apigatewayv2_integration","name":"lambda","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"api_id":"2aveis6cl1","connection_id":"","connection_type":"INTERNET","content_handling_strategy":"","credentials_arn":"","description":"","id":"rf0dafu","integration_method":"POST","integration_response_selection_expression":"","integration_subtype":"","integration_type":"AWS_PROXY","integration_uri":"arn:aws:lambda:us-east-2:511211062907:function:lambda-sample","passthrough_behavior":"","payload_format_version":"1.0","request_parameters":null,"request_templates":null,"response_parameters":[],"template_selection_expression":"","timeout_milliseconds":30000,"tls_config":[]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.function.aws_iam_role.lambda","module.function.aws_lambda_function.function","module.function.data.archive_file.source_code","module.function.data.aws_iam_policy_document.policy","module.gateway.aws_apigatewayv2_api.api"]}]},{"module":"module.gateway","mode":"managed","type":"aws_apigatewayv2_route","name":"lambda_route","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":"GET /","schema_version":0,"attributes":{"api_id":"2aveis6cl1","api_key_required":false,"authorization_scopes":null,"authorization_type":"NONE","authorizer_id":"","id":"nt3279o","model_selection_expression":"","operation_name":"","request_models":null,"request_parameter":[],"route_key":"GET /","route_response_selection_expression":"","target":"integrations/rf0dafu"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.function.aws_iam_role.lambda","module.function.aws_lambda_function.function","module.function.data.archive_file.source_code","module.function.data.aws_iam_policy_document.policy","module.gateway.aws_apigatewayv2_api.api","module.gateway.aws_apigatewayv2_integration.lambda"]}]},{"module":"module.gateway","mode":"managed","type":"aws_apigatewayv2_stage","name":"default","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"access_log_settings":[],"api_id":"2aveis6cl1","arn":"arn:aws:apigateway:us-east-2::/apis/2aveis6cl1/stages/$default","auto_deploy":true,"client_certificate_id":"","default_route_settings":[{"data_trace_enabled":false,"detailed_metrics_enabled":false,"logging_level":"","throttling_burst_limit":10000,"throttling_rate_limit":10000}],"deployment_id":"","description":"","execution_arn":"arn:aws:execute-api:us-east-2:511211062907:2aveis6cl1/$default","id":"$default","invoke_url":"https://2aveis6cl1.execute-api.us-east-2.amazonaws.com/","name":"$default","route_settings":[],"stage_variables":null,"tags":null,"tags_all":{}},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.gateway.aws_apigatewayv2_api.api"]}]},{"module":"module.gateway","mode":"managed","type":"aws_lambda_permission","name":"allow_invoke","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":"GET /","schema_version":0,"attributes":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"arn:aws:lambda:us-east-2:511211062907:function:lambda-sample","function_url_auth_type":null,"id":"AllowAPIGatewayToCallSampleAppLambda","principal":"apigateway.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:us-east-2:511211062907:2aveis6cl1/*/GET/","statement_id":"AllowAPIGatewayToCallSampleAppLambda","statement_id_prefix":""},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.function.aws_iam_role.lambda","module.function.aws_lambda_function.function","module.function.data.archive_file.source_code","module.function.data.aws_iam_policy_document.policy","module.gateway.aws_apigatewayv2_api.api"]}]}],"check_results":null}
