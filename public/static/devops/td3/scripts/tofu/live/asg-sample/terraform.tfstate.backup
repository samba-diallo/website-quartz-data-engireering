{"version":4,"terraform_version":"1.10.7","serial":3,"lineage":"30eb4ed4-9bbe-c199-d8c5-e2332b1ad2fe","outputs":{"alb_dns_name":{"value":"sample-app-alb-1026886045.us-east-2.elb.amazonaws.com","type":"string"}},"resources":[{"module":"module.alb","mode":"data","type":"aws_subnets","name":"default","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"filter":[{"name":"vpc-id","values":["vpc-06a4f43dc94eb5fe2"]}],"id":"us-east-2","ids":["subnet-02e126c9332b2eab5","subnet-09f54a4892e8d2be9","subnet-0e4d7f32b0702305b"],"tags":null,"timeouts":null},"sensitive_attributes":[]}]},{"module":"module.alb","mode":"data","type":"aws_vpc","name":"default","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ec2:us-east-2:511211062907:vpc/vpc-06a4f43dc94eb5fe2","cidr_block":"172.31.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-0c5b9793379ed796a","cidr_block":"172.31.0.0/16","state":"associated"}],"default":true,"dhcp_options_id":"dopt-039c8677275a21efb","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"filter":null,"id":"vpc-06a4f43dc94eb5fe2","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-0e4c2ced3e5b0ea3d","owner_id":"511211062907","state":null,"tags":{},"timeouts":null},"sensitive_attributes":[]}]},{"module":"module.alb","mode":"managed","type":"aws_lb","name":"sample_app","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-2:511211062907:loadbalancer/app/sample-app-alb/5869c82d9822ed06","arn_suffix":"app/sample-app-alb/5869c82d9822ed06","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"sample-app-alb-1026886045.us-east-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:us-east-2:511211062907:loadbalancer/app/sample-app-alb/5869c82d9822ed06","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"application","name":"sample-app-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-088f62640db3682a7"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-02e126c9332b2eab5"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-09f54a4892e8d2be9"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0e4d7f32b0702305b"}],"subnets":["subnet-02e126c9332b2eab5","subnet-09f54a4892e8d2be9","subnet-0e4d7f32b0702305b"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-06a4f43dc94eb5fe2","xff_header_processing_mode":"append","zone_id":"Z3AADJGX6KTTL2"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19","dependencies":["module.alb.aws_security_group.alb","module.alb.data.aws_subnets.default","module.alb.data.aws_vpc.default"]}]},{"module":"module.alb","mode":"managed","type":"aws_lb_listener","name":"sample_app","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-2:511211062907:listener/app/sample-app-alb/5869c82d9822ed06/08b52eb50c73cd0d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-2:511211062907:targetgroup/sample-app-alb/659c9c0892f05e97","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-2:511211062907:listener/app/sample-app-alb/5869c82d9822ed06/08b52eb50c73cd0d","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-2:511211062907:loadbalancer/app/sample-app-alb/5869c82d9822ed06","mutual_authentication":[],"port":80,"protocol":"HTTP","ssl_policy":"","tags":{},"tags_all":{},"timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=","dependencies":["module.alb.aws_lb.sample_app","module.alb.aws_lb_target_group.sample_app","module.alb.aws_security_group.alb","module.alb.data.aws_subnets.default","module.alb.data.aws_vpc.default"]}]},{"module":"module.alb","mode":"managed","type":"aws_lb_target_group","name":"sample_app","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:elasticloadbalancing:us-east-2:511211062907:targetgroup/sample-app-alb/659c9c0892f05e97","arn_suffix":"targetgroup/sample-app-alb/659c9c0892f05e97","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:us-east-2:511211062907:targetgroup/sample-app-alb/659c9c0892f05e97","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:us-east-2:511211062907:loadbalancer/app/sample-app-alb/5869c82d9822ed06"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"sample-app-alb","name_prefix":"","port":8080,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_health_state":[{"enable_unhealthy_connection_termination":null}],"target_type":"instance","vpc_id":"vpc-06a4f43dc94eb5fe2"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.alb.data.aws_vpc.default"]}]},{"module":"module.alb","mode":"managed","type":"aws_security_group","name":"alb","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:us-east-2:511211062907:security-group/sg-088f62640db3682a7","description":"Allow HTTP traffic into sample-app-alb","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-088f62640db3682a7","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"sample-app-alb","name_prefix":"","owner_id":"511211062907","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-06a4f43dc94eb5fe2"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="}]},{"module":"module.alb","mode":"managed","type":"aws_security_group_rule","name":"alb_allow_all_outbound","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":2,"attributes":{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"id":"sgrule-839420833","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"sg-088f62640db3682a7","security_group_rule_id":"sgr-002de04476b9680bd","self":false,"source_security_group_id":null,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==","dependencies":["module.alb.aws_security_group.alb"]}]},{"module":"module.alb","mode":"managed","type":"aws_security_group_rule","name":"alb_allow_http_inbound","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":2,"attributes":{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"id":"sgrule-545748138","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-088f62640db3682a7","security_group_rule_id":"sgr-00d83ada77e630871","self":false,"source_security_group_id":null,"timeouts":null,"to_port":80,"type":"ingress"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==","dependencies":["module.alb.aws_security_group.alb"]}]},{"module":"module.asg","mode":"data","type":"aws_ami","name":"sample_app","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-2::image/ami-07804164695f58d34","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"3000","snapshot_id":"snap-04e62ea4f3876f861","throughput":"125","volume_size":"8","volume_type":"gp3"},"no_device":"","virtual_name":""}],"boot_mode":"uefi-preferred","creation_date":"2025-12-06T17:49:19.000Z","deprecation_time":"","description":"An Amazon Linux 2023 AMI that has a Node.js sample app installed.","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["sample-app-packer-*"]}],"hypervisor":"xen","id":"ami-07804164695f58d34","image_id":"ami-07804164695f58d34","image_location":"511211062907/sample-app-packer-e7401108-ac4d-4e77-b507-c47c3c092953","image_owner_alias":"","image_type":"machine","imds_support":"v2.0","include_deprecated":false,"kernel_id":"","most_recent":true,"name":"sample-app-packer-e7401108-ac4d-4e77-b507-c47c3c092953","name_regex":null,"owner_id":"511211062907","owners":["self"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":false,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-04e62ea4f3876f861","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_attributes":[]}]},{"module":"module.asg","mode":"data","type":"aws_subnets","name":"default","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"filter":[{"name":"vpc-id","values":["vpc-06a4f43dc94eb5fe2"]}],"id":"us-east-2","ids":["subnet-02e126c9332b2eab5","subnet-09f54a4892e8d2be9","subnet-0e4d7f32b0702305b"],"tags":null,"timeouts":null},"sensitive_attributes":[]}]},{"module":"module.asg","mode":"data","type":"aws_vpc","name":"default","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ec2:us-east-2:511211062907:vpc/vpc-06a4f43dc94eb5fe2","cidr_block":"172.31.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-0c5b9793379ed796a","cidr_block":"172.31.0.0/16","state":"associated"}],"default":true,"dhcp_options_id":"dopt-039c8677275a21efb","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"filter":null,"id":"vpc-06a4f43dc94eb5fe2","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-0e4c2ced3e5b0ea3d","owner_id":"511211062907","state":null,"tags":{},"timeouts":null},"sensitive_attributes":[]}]},{"module":"module.asg","mode":"managed","type":"aws_autoscaling_group","name":"sample_app","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:autoscaling:us-east-2:511211062907:autoScalingGroup:8d91fcee-e190-481e-a743-3b3ff0de1875:autoScalingGroupName/sample-app-asg20251206175956234300000002","availability_zones":["us-east-2a","us-east-2b","us-east-2c"],"capacity_rebalance":false,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":3,"desired_capacity_type":"","enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"ELB","id":"sample-app-asg20251206175956234300000002","ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[{"preferences":[{"alarm_specification":[],"auto_rollback":true,"checkpoint_delay":"","checkpoint_percentages":null,"instance_warmup":"","max_healthy_percentage":200,"min_healthy_percentage":100,"scale_in_protected_instances":"Ignore","skip_matching":false,"standby_instances":"Ignore"}],"strategy":"Rolling","triggers":null}],"launch_configuration":"","launch_template":[{"id":"lt-099cc3674556a57d1","name":"sample-app-asg20251206161342072100000001","version":"2"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":10,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[],"name":"sample-app-asg20251206175956234300000002","name_prefix":"sample-app-asg","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::511211062907:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"sample-app-asg"}],"target_group_arns":["arn:aws:elasticloadbalancing:us-east-2:511211062907:targetgroup/sample-app-alb/659c9c0892f05e97"],"termination_policies":null,"timeouts":null,"traffic_source":[{"identifier":"arn:aws:elasticloadbalancing:us-east-2:511211062907:targetgroup/sample-app-alb/659c9c0892f05e97","type":"elbv2"}],"vpc_zone_identifier":["subnet-02e126c9332b2eab5","subnet-09f54a4892e8d2be9","subnet-0e4d7f32b0702305b"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjo2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=","dependencies":["module.alb.aws_lb_target_group.sample_app","module.alb.data.aws_vpc.default","module.asg.aws_launch_template.sample_app","module.asg.aws_security_group.sample_app","module.asg.data.aws_ami.sample_app","module.asg.data.aws_subnets.default","module.asg.data.aws_vpc.default"]}]},{"module":"module.asg","mode":"managed","type":"aws_launch_template","name":"sample_app","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ec2:us-east-2:511211062907:launch-template/lt-099cc3674556a57d1","block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"id":"lt-099cc3674556a57d1","image_id":"ami-07804164695f58d34","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":2,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"sample-app-asg20251206161342072100000001","name_prefix":"sample-app-asg","network_interfaces":[],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"IyEvdXNyL2Jpbi9lbnYgYmFzaAoKc2V0IC1lCgpzdWRvIHN1IGFwcC11c2VyICAgICAgICAgCmNkIC9ob21lL2FwcC11c2VyICAgICAgICAKcG0yIHN0YXJ0IGFwcC5jb25maWcuanMgIApwbTIgc2F2ZSAgICAgICAgICAgICAgICAg","vpc_security_group_ids":["sg-09ca1ffa7e0633ef0"]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.asg.aws_security_group.sample_app","module.asg.data.aws_ami.sample_app"]}]},{"module":"module.asg","mode":"managed","type":"aws_security_group","name":"sample_app","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:us-east-2:511211062907:security-group/sg-09ca1ffa7e0633ef0","description":"Allow HTTP traffic into sample-app-asg","egress":[],"id":"sg-09ca1ffa7e0633ef0","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"sample-app-asg","name_prefix":"","owner_id":"511211062907","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-06a4f43dc94eb5fe2"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="}]},{"module":"module.asg","mode":"managed","type":"aws_security_group_rule","name":"sample_app_allow_http_inbound","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":2,"attributes":{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"id":"sgrule-1126841302","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-09ca1ffa7e0633ef0","security_group_rule_id":"sgr-03c2a28ffea6a5e4b","self":false,"source_security_group_id":null,"timeouts":null,"to_port":8080,"type":"ingress"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==","dependencies":["module.asg.aws_security_group.sample_app"]}]}],"check_results":null}
